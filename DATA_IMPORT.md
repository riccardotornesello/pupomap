# Data Import Guide

This document explains how to import data into the Pupomap application via JSON file upload.

## Database Changes

The application now uses:
- **INTEGER** IDs (auto-incrementing) instead of TEXT IDs
- **No automatic data seeding** - database starts empty
- **JSON file upload** for bulk data import via admin panel

## JSON Format

To import pupi data, create a JSON file with an array of pupo objects. Each object should have the following fields:

```json
[
  {
    "name": "Il Vecchione di Corso Roma",
    "description": "Il classico 'Pupo' che rappresenta l'anno vecchio...",
    "lat": 40.0565,
    "lng": 17.978,
    "imageUrl": "https://example.com/image.jpg",
    "artist": "Associazione Cartapesta Gallipolina",
    "theme": "Tradizionale"
  }
]
```

### Required Fields

- `name` (string): Name of the pupo
- `description` (string): Description of the pupo
- `lat` (number): Latitude coordinate
- `lng` (number): Longitude coordinate  
- `imageUrl` (string): URL to the image
- `artist` (string): Name of the artist/creator
- `theme` (string): Theme category (e.g., "Tradizionale", "Satira Politica", "Fantasia")

**Note:** Do NOT include an `id` field - IDs are automatically generated by the database.

## How to Import Data

1. Login to the admin panel at `/admin/login`
2. Click the **"Importa JSON"** button
3. Select your JSON file
4. The system will:
   - Validate the JSON format
   - Check all required fields are present
   - Import each pupo with an auto-generated ID
   - Show a success message with import results

## Sample Data

A sample data file `sample-data.json` is provided in the repository root. This contains example pupi from Gallipoli, Italy.

To import the sample data:
1. Go to the admin panel
2. Click "Importa JSON"
3. Select `sample-data.json`

## Database Migration

If you have an existing database with TEXT IDs, you'll need to:

1. Export your current data (if any)
2. Delete the old database file (`data/pupi.db` for SQLite)
3. Start the application - it will create a new database with INTEGER IDs
4. Re-import your data using JSON upload (removing the `id` field from your JSON)

## Notes

- IDs are now auto-incrementing integers starting from 1
- You can still add pupi manually one at a time through the admin form
- The JSON import supports bulk adding multiple pupi at once
- Each import creates new entries (does not update existing ones)
